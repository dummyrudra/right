<ng-template #content let-modal class="modal-dialog modal-xl">
  <div class="modal-content">
    <div>
      <div>
        <div class="modal-body">
          <div class="task-detail-modal d-xl-flex">
            <div class="task-left-content-detail me-sm-4">
              <div class="d-flex mt-2 mb-4">
                <div class="d-flex align-items-center">
                  <img src="assets/img/b.svg" class="img-fluid w-15px" alt="img" loading="lazy" />
                  <h6 class="fs-7 fw-normal text-muted ms-3 mb-0">
                    Redesign full Website
                  </h6>
                </div>
                <div class="text-muted fs-9 mx-2">/</div>
                <a class="d-flex align-items-center"
                  [routerLink]="['/'+organisation+'/project/'+task?.projectID?.key+'/'+task?.SN]" (click)="closeModal()">
                  <img [src]="'assets/img/'+ issueImage?.[task?.issueType]" class="img-fluid w-15px" alt="img"
                    loading="lazy" />
                  <h6 class="fs-7 fw-normal text-muted ms-3 mb-0">
                    {{ task?.projectID?.key }}-{{ task?.SN }}
                  </h6>
                </a>
                <div class="d-flex align-items-center px-2" *ngIf="task?.flag">
                  <i class="bi bi-flag-fill" style="color: red;"></i>
                </div>
              </div>
              <input type="text" class="w-100 form-control fs-4 fw-bold focus-input" [value]="task?.summary"
                (change)="updateData($event, 'summary')" />
              <div class="d-flex flex-wrap mt-4">
                <div class="me-4">
                  <div class="custom-file attach-file w-80px cursor-pointer" data-bs-toggle="tooltip"
                    data-bs-placement="bottom" title="add attachment">
                    <input type="file" class="custom-file-input " id="customFile" multiple
                      (change)="updateData($event, 'attachment')" />
                    <label class="custom-file-label btn btn-secondary btn-sm p-0 h-auto " for="customFile">
                      <a href="#" class="btn btn-secondary btn-sm py-2 px-0">
                        <span class="svg-icon me-1 svg-icon-primary svg-icon-4">
                          <!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2021-05-14-112058/theme/html/demo1/dist/../src/media/svg/icons/General/Attachment1.svg-->
                          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                            width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                              <rect x="0" y="0" width="24" height="24" />
                              <path
                                d="M12.4644661,14.5355339 L9.46446609,14.5355339 C8.91218134,14.5355339 8.46446609,14.9832492 8.46446609,15.5355339 C8.46446609,16.0878187 8.91218134,16.5355339 9.46446609,16.5355339 L12.4644661,16.5355339 L12.4644661,17.5355339 C12.4644661,18.6401034 11.5690356,19.5355339 10.4644661,19.5355339 L6.46446609,19.5355339 C5.35989659,19.5355339 4.46446609,18.6401034 4.46446609,17.5355339 L4.46446609,13.5355339 C4.46446609,12.4309644 5.35989659,11.5355339 6.46446609,11.5355339 L10.4644661,11.5355339 C11.5690356,11.5355339 12.4644661,12.4309644 12.4644661,13.5355339 L12.4644661,14.5355339 Z"
                                fill="#000000" opacity="0.3"
                                transform="translate(8.464466, 15.535534) rotate(-45.000000) translate(-8.464466, -15.535534) " />
                              <path
                                d="M11.5355339,9.46446609 L14.5355339,9.46446609 C15.0878187,9.46446609 15.5355339,9.01675084 15.5355339,8.46446609 C15.5355339,7.91218134 15.0878187,7.46446609 14.5355339,7.46446609 L11.5355339,7.46446609 L11.5355339,6.46446609 C11.5355339,5.35989659 12.4309644,4.46446609 13.5355339,4.46446609 L17.5355339,4.46446609 C18.6401034,4.46446609 19.5355339,5.35989659 19.5355339,6.46446609 L19.5355339,10.4644661 C19.5355339,11.5690356 18.6401034,12.4644661 17.5355339,12.4644661 L13.5355339,12.4644661 C12.4309644,12.4644661 11.5355339,11.5690356 11.5355339,10.4644661 L11.5355339,9.46446609 Z"
                                fill="#000000"
                                transform="translate(15.535534, 8.464466) rotate(-45.000000) translate(-15.535534, -8.464466) " />
                            </g>
                          </svg>
                          <!--end::Svg Icon-->
                        </span>
                        Attach
                      </a>
                    </label>
                  </div>
                </div>
                <div class="me-4">
                  <a href="!#" class="btn btn-secondary btn-sm py-2 px-3" data-bs-toggle="tooltip"
                    data-bs-placement="bottom" title="add issue">
                    <span class="svg-icon me-1 svg-icon-primary svg-icon-4">
                      <!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2021-05-14-112058/theme/html/demo1/dist/../src/media/svg/icons/Navigation/Plus.svg-->
                      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                        height="24px" viewBox="0 0 24 24" version="1.1">
                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                          <rect fill="#000000" x="4" y="11" width="16" height="2" rx="1" />
                          <rect fill="#000000" opacity="0.3"
                            transform="translate(12.000000, 12.000000) rotate(-270.000000) translate(-12.000000, -12.000000) "
                            x="4" y="11" width="16" height="2" rx="1" />
                        </g>
                      </svg>
                      <!--end::Svg Icon-->
                    </span>
                    Add Issue
                  </a>
                </div>
                <div class="me-4">
                  <a href="#" class="btn btn-secondary btn-sm px-3 py-2" data-bs-toggle="tooltip"
                    data-bs-placement="bottom" title="link issue">
                    <span class="svg-icon svg-icon-primary svg-icon-4 me-1">
                      <!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2021-05-14-112058/theme/html/demo1/dist/../src/media/svg/icons/General/Attachment1.svg-->
                      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                        height="24px" viewBox="0 0 24 24" version="1.1">
                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                          <rect x="0" y="0" width="24" height="24" />
                          <path
                            d="M12.4644661,14.5355339 L9.46446609,14.5355339 C8.91218134,14.5355339 8.46446609,14.9832492 8.46446609,15.5355339 C8.46446609,16.0878187 8.91218134,16.5355339 9.46446609,16.5355339 L12.4644661,16.5355339 L12.4644661,17.5355339 C12.4644661,18.6401034 11.5690356,19.5355339 10.4644661,19.5355339 L6.46446609,19.5355339 C5.35989659,19.5355339 4.46446609,18.6401034 4.46446609,17.5355339 L4.46446609,13.5355339 C4.46446609,12.4309644 5.35989659,11.5355339 6.46446609,11.5355339 L10.4644661,11.5355339 C11.5690356,11.5355339 12.4644661,12.4309644 12.4644661,13.5355339 L12.4644661,14.5355339 Z"
                            fill="#000000" opacity="0.3"
                            transform="translate(8.464466, 15.535534) rotate(-45.000000) translate(-8.464466, -15.535534) " />
                          <path
                            d="M11.5355339,9.46446609 L14.5355339,9.46446609 C15.0878187,9.46446609 15.5355339,9.01675084 15.5355339,8.46446609 C15.5355339,7.91218134 15.0878187,7.46446609 14.5355339,7.46446609 L11.5355339,7.46446609 L11.5355339,6.46446609 C11.5355339,5.35989659 12.4309644,4.46446609 13.5355339,4.46446609 L17.5355339,4.46446609 C18.6401034,4.46446609 19.5355339,5.35989659 19.5355339,6.46446609 L19.5355339,10.4644661 C19.5355339,11.5690356 18.6401034,12.4644661 17.5355339,12.4644661 L13.5355339,12.4644661 C12.4309644,12.4644661 11.5355339,11.5690356 11.5355339,10.4644661 L11.5355339,9.46446609 Z"
                            fill="#000000"
                            transform="translate(15.535534, 8.464466) rotate(-45.000000) translate(-15.535534, -8.464466) " />
                        </g>
                      </svg>
                      <!--end::Svg Icon-->
                    </span>
                    Link issue
                  </a>
                </div>
              </div>
              <div class="description my-8" [formGroup]="form1">
                <h6 class="mb-5">
                  Description
                </h6>
                <ng-container *ngIf="isEditing; else readonlyModeTmpl">
                  <quill-editor class="content-editor comment mb-1" [modules]="editorOptions"
                    formControlName="description" [placeholder]="''" (onContentChanged)="logChange($event)"
                    (onEditorCreated)="editorCreated($event)">
                  </quill-editor>

                  <div class="pt-3 mb-1 flex
                                      items-center">
                    <button nz-button class="mr-2 py-0 btn btn-primary btn-sm" (click)="save()" nzType="primary">
                      Save
                    </button>
                    <button class="btn py-0 btn-light btn-sm" nz-button nzSecondary (click)="cancel()">
                      Cancel
                    </button>
                  </div>
                </ng-container>

                <ng-template #readonlyModeTmpl>
                  <div class="ql-snow content-readonly row" *ngIf="!isEditing" (click)="setEditMode()">
                    <div class="ql-editor col-11" [innerHTML]="
                        descriptionData || 'Click to add description'
                      "></div>
                    <div class="icon-edit col-1">
                      <i nz-icon class="cursor-pointer" title="Click to edit" nzType="edit" nzTheme="outline"></i>
                    </div>
                  </div>
                </ng-template>
              </div>
              <div *ngIf="task?.attachment?.length>0" class="modal-attachment mb-8">
                <h6 class="mb-5">Attachment</h6>
                <div class="d-flex align-items-center">
                  <div *ngFor="let attach of task?.attachment"
                    class="attachment-div me-5 bg-light rounded d-flex align-items-center justify-content-center h-100px w-100px position-relative">
                    <div class="position-absolute action-attach  bottom-0 end-0">
                      <div class="actions p-2">
                        <a (click)="downloadImage(!attach.includes('.')?attach:baseUrl1+attach)">
                          <div
                            class="w-25px ms-auto h-25px rounded bg-white d-flex align-items-center justify-content-center cursor-pointer"
                            download>
                            <span class="svg-icon svg-icon-primary svg-icon-2x">
                              <!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2021-05-14-112058/theme/html/demo1/dist/../src/media/svg/icons/Files/Download.svg--><svg
                                xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                  <rect x="0" y="0" width="24" height="24" />
                                  <path
                                    d="M2,13 C2,12.5 2.5,12 3,12 C3.5,12 4,12.5 4,13 C4,13.3333333 4,15 4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 C2,15 2,13.3333333 2,13 Z"
                                    fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                  <rect fill="#000000" opacity="0.3"
                                    transform="translate(12.000000, 8.000000) rotate(-180.000000) translate(-12.000000, -8.000000) "
                                    x="11" y="1" width="2" height="14" rx="1" />
                                  <path
                                    d="M7.70710678,15.7071068 C7.31658249,16.0976311 6.68341751,16.0976311 6.29289322,15.7071068 C5.90236893,15.3165825 5.90236893,14.6834175 6.29289322,14.2928932 L11.2928932,9.29289322 C11.6689749,8.91681153 12.2736364,8.90091039 12.6689647,9.25670585 L17.6689647,13.7567059 C18.0794748,14.1261649 18.1127532,14.7584547 17.7432941,15.1689647 C17.3738351,15.5794748 16.7415453,15.6127532 16.3310353,15.2432941 L12.0362375,11.3779761 L7.70710678,15.7071068 Z"
                                    fill="#000000" fill-rule="nonzero"
                                    transform="translate(12.000004, 12.499999) rotate(-180.000000) translate(-12.000004, -12.499999) " />
                                </g>
                              </svg>
                              <!--end::Svg Icon-->
                            </span>
                          </div>
                        </a>

                      </div>
                    </div>
                    <div class="position-absolute end-0 cursor-pointer top-0">
                      <span _ngcontent-bgh-c224="" class="svg-icon svg-icon-primary svg-icon-6x"><svg
                          _ngcontent-bgh-c224="" xmlns="http://www.w3.org/2000/svg"
                          xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24"
                          version="1.1">
                          <g _ngcontent-bgh-c224="" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect _ngcontent-bgh-c224="" x="0" y="0" width="24" height="24"></rect>
                            <circle _ngcontent-bgh-c224="" fill="#000000" opacity="0.3" cx="12" cy="12" r="10"></circle>
                            <path _ngcontent-bgh-c224=""
                              d="M12.0355339,10.6213203 L14.863961,7.79289322 C15.2544853,7.40236893 15.8876503,7.40236893 16.2781746,7.79289322 C16.6686989,8.18341751 16.6686989,8.81658249 16.2781746,9.20710678 L13.4497475,12.0355339 L16.2781746,14.863961 C16.6686989,15.2544853 16.6686989,15.8876503 16.2781746,16.2781746 C15.8876503,16.6686989 15.2544853,16.6686989 14.863961,16.2781746 L12.0355339,13.4497475 L9.20710678,16.2781746 C8.81658249,16.6686989 8.18341751,16.6686989 7.79289322,16.2781746 C7.40236893,15.8876503 7.40236893,15.2544853 7.79289322,14.863961 L10.6213203,12.0355339 L7.79289322,9.20710678 C7.40236893,8.81658249 7.40236893,8.18341751 7.79289322,7.79289322 C8.18341751,7.40236893 8.81658249,7.40236893 9.20710678,7.79289322 L12.0355339,10.6213203 Z"
                              fill="#000000"></path>
                          </g>
                        </svg></span>
                    </div>

                    <img [src]="!attach.includes('.')?attach:baseUrl1+attach" [alt]="attach" class="img-fluid">
                    <!-- <button (click)="downloadImage(!attach.includes('.')?attach:baseUrl1+attach)" class="btn">Download</button> -->
                  </div>
                  <!-- <div class="attachment-div me-2 bg-light rounded d-flex align-items-center justify-content-center h-125px w-125px position-relative">
                      <div class="w-100 h-100 position-absolute action-attach top-0 left-0">
                        <div class="actions p-2">
                              <div class="w-25px ms-auto h-25px rounded bg-white d-flex align-items-center justify-content-center cursor-pointer" download>
                              <span class="svg-icon svg-icon-primary svg-icon-2x">
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <polygon points="0 0 24 0 24 24 0 24"/>
                                        <path d="M5.74714567,13.0425758 C4.09410362,11.9740356 3,10.1147886 3,8 C3,4.6862915 5.6862915,2 9,2 C11.7957591,2 14.1449096,3.91215918 14.8109738,6.5 L17.25,6.5 C19.3210678,6.5 21,8.17893219 21,10.25 C21,12.3210678 19.3210678,14 17.25,14 L8.25,14 C7.28817895,14 6.41093178,13.6378962 5.74714567,13.0425758 Z" fill="#000000" opacity="0.3"/>
                                        <path d="M11.1288761,15.7336977 L11.1288761,17.6901712 L9.12120481,17.6901712 C8.84506244,17.6901712 8.62120481,17.9140288 8.62120481,18.1901712 L8.62120481,19.2134699 C8.62120481,19.4896123 8.84506244,19.7134699 9.12120481,19.7134699 L11.1288761,19.7134699 L11.1288761,21.6699434 C11.1288761,21.9460858 11.3527337,22.1699434 11.6288761,22.1699434 C11.7471877,22.1699434 11.8616664,22.1279896 11.951961,22.0515402 L15.4576222,19.0834174 C15.6683723,18.9049825 15.6945689,18.5894857 15.5161341,18.3787356 C15.4982803,18.3576485 15.4787093,18.3380775 15.4576222,18.3202237 L11.951961,15.3521009 C11.7412109,15.173666 11.4257142,15.1998627 11.2472793,15.4106128 C11.1708299,15.5009075 11.1288761,15.6153861 11.1288761,15.7336977 Z" fill="#000000" fill-rule="nonzero" transform="translate(11.959697, 18.661508) rotate(-270.000000) translate(-11.959697, -18.661508) "/>
                                    </g>
                                </svg>
                              </span>
                            </div>
                        </div>
                 </div>
                  </div> -->
                </div>
              </div>
              <div class="activity activity-tab">
                <h6 class="mb-5">Activity</h6>
                <app-activity (activityEvent)="activityEvent()" [task]="task" [comments]="comments" [allData]="allData"
                  [history]="history"></app-activity>

              </div>
            </div>
            <div class="task-right-content-detail mt-10 mt-lg-0">
              <div class="modal-action-bar">
                <ul class="list-unstyled text-end mb-md-5 mb-4">
                  <li class="list-inline-item cursor-pointer me-6" data-bs-toggle="tooltip" data-bs-placement="top"
                    title="No restriction">
                    <div data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-flip="top-end"
                      class=" menu-dropdown">
                      <!-- <i class="fas fa-lock text-dark fs-3"></i> -->
                      <span class="svg-icon svg-icon-gray-600 svg-icon-2">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                          height="24px" viewBox="0 0 24 24" version="1.1">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect x="0" y="0" width="24" height="24" />
                            <path
                              d="M7.38979581,2.8349582 C8.65216735,2.29743306 10.0413491,2 11.5,2 C17.2989899,2 22,6.70101013 22,12.5 C22,18.2989899 17.2989899,23 11.5,23 C5.70101013,23 1,18.2989899 1,12.5 C1,11.5151324 1.13559454,10.5619345 1.38913364,9.65805651 L3.31481075,10.1982117 C3.10672013,10.940064 3,11.7119264 3,12.5 C3,17.1944204 6.80557963,21 11.5,21 C16.1944204,21 20,17.1944204 20,12.5 C20,7.80557963 16.1944204,4 11.5,4 C10.54876,4 9.62236069,4.15592757 8.74872191,4.45446326 L9.93948308,5.87355717 C10.0088058,5.95617272 10.0495583,6.05898805 10.05566,6.16666224 C10.0712834,6.4423623 9.86044965,6.67852665 9.5847496,6.69415008 L4.71777931,6.96995273 C4.66931162,6.97269931 4.62070229,6.96837279 4.57348157,6.95710938 C4.30487471,6.89303938 4.13906482,6.62335149 4.20313482,6.35474463 L5.33163823,1.62361064 C5.35654118,1.51920756 5.41437908,1.4255891 5.49660017,1.35659741 C5.7081375,1.17909652 6.0235153,1.2066885 6.2010162,1.41822583 L7.38979581,2.8349582 Z"
                              fill="#000000" opacity="0.3" />
                            <path
                              d="M14.5,11 C15.0522847,11 15.5,11.4477153 15.5,12 L15.5,15 C15.5,15.5522847 15.0522847,16 14.5,16 L9.5,16 C8.94771525,16 8.5,15.5522847 8.5,15 L8.5,12 C8.5,11.4477153 8.94771525,11 9.5,11 L9.5,10.5 C9.5,9.11928813 10.6192881,8 12,8 C13.3807119,8 14.5,9.11928813 14.5,10.5 L14.5,11 Z M12,9 C11.1715729,9 10.5,9.67157288 10.5,10.5 L10.5,11 L13.5,11 L13.5,10.5 C13.5,9.67157288 12.8284271,9 12,9 Z"
                              fill="#000000" />
                          </g>
                        </svg>
                      </span>
                    </div>
                    <div
                      class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold w-300px py-5 px-3 text-start"
                      data-kt-menu="true" data-popper-placement="bottom-end">
                      <!--begin::Menu item-->
                      <div class="menu-item px-3 text-start">
                        <h4 and fronth4>Restrict RI-6</h4>
                        <p class="fw-normal">
                          Only allow these roles to view this issue
                        </p>
                        <div class="form-group">
                          <div>
                            <button type="button"
                              class="btn w-100  text-start btn-secondary fs-7 px-4 py-2 menu-dropdown "
                              data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end"
                              data-kt-menu-flip="top-end">
                              Select Role
                              <span class="svg-icon svg-icon-primary svg-icon float-end">
                                <!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2021-05-14-112058/theme/html/demo1/dist/../src/media/svg/icons/Navigation/Angle-down.svg-->
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                  width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <polygon points="0 0 24 0 24 24 0 24"></polygon>
                                    <path
                                      d="M6.70710678,15.7071068 C6.31658249,16.0976311 5.68341751,16.0976311 5.29289322,15.7071068 C4.90236893,15.3165825 4.90236893,14.6834175 5.29289322,14.2928932 L11.2928932,8.29289322 C11.6714722,7.91431428 12.2810586,7.90106866 12.6757246,8.26284586 L18.6757246,13.7628459 C19.0828436,14.1360383 19.1103465,14.7686056 18.7371541,15.1757246 C18.3639617,15.5828436 17.7313944,15.6103465 17.3242754,15.2371541 L12.0300757,10.3841378 L6.70710678,15.7071068 Z"
                                      fill="#000000" fill-rule="nonzero"
                                      transform="translate(12.000003, 11.999999) rotate(-180.000000) translate(-12.000003, -11.999999) ">
                                    </path>
                                  </g>
                                </svg>
                                <!--end::Svg Icon-->
                              </span>
                            </button>
                            <!--begin::Menu 2-->
                            <div
                              class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold  py-3"
                              data-kt-menu="true" data-popper-placement="bottom-end">
                              <!--begin::Menu item-->
                              <div class="menu-item px-3">
                                <a href="#" class="menu-link px-3">Administrator</a>
                              </div>
                              <div class="menu-item px-3">
                                <a href="#" class="menu-link px-3">Member</a>
                              </div>
                              <div class="menu-item px-3">
                                <a href="#" class="menu-link px-3">Viwer</a>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="mt-10 text-end">
                          <button type="button" class="btn btn-light btn-sm me-3" data-bs-dismiss="modal">
                            Cancel
                          </button>
                          <button type="button" class="btn btn-secondary btn-sm">
                            Restrict
                          </button>
                        </div>
                      </div>
                    </div>
                  </li>
                  <li class="list-inline-item  cursor-pointer  me-6" data-bs-toggle="tooltip" data-bs-placement="top"
                    title="Watch Option">
                    <div class=" menu-dropdown">
                      <!-- <i class="p-0 fa fa-eye text-dark fs-3"></i> -->
                      <span class="svg-icon svg-icon-gray-600 svg-icon-2">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                          height="24px" viewBox="0 0 24 24" version="1.1">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect x="0" y="0" width="24" height="24" />
                            <rect fill="#000000" opacity="0.3" x="12" y="7" width="10" height="2" rx="1" />
                            <path
                              d="M2,9 C1.44771525,9 1,8.55228475 1,8 C1,7.44771525 1.44771525,7 2,7 L7.35012691,7 C8.14050434,7 8.85674733,7.46546704 9.17775001,8.18772307 L12.6498731,16 L22,16 C22.5522847,16 23,16.4477153 23,17 C23,17.5522847 22.5522847,18 22,18 L12.6498731,18 C11.8594957,18 11.1432527,17.534533 10.82225,16.8122769 L7.35012691,9 L2,9 Z"
                              fill="#000000" fill-rule="nonzero" />
                          </g>
                        </svg>
                      </span>
                    </div>
                    <div
                      class="menu menu-sub text-start menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold w-300px py-5 px-3"
                      data-kt-menu="true" data-popper-placement="bottom-end">
                      <!--begin::Menu item-->
                      <div class="menu-item px-3">
                        <h4>Stop Watching</h4>
                        <hr />
                        <h5 class="fw-normal mb-5">Watching This Issue</h5>
                        <div class="user-profile">
                          <div class="d-flex  w-100 me-2 mb-5">
                            <div
                              class="h-25px w-25px user-profile rounded-circle me-4 bg-warning d-flex align-items-center justify-content-center">
                              A
                            </div>
                            <a href="#" class="text-dark  text-hover-primary d-block fs-6">Amit Kumar</a>
                          </div>
                          <div class="d-flex  w-100 me-2">
                            <div
                              class="h-25px w-25px user-profile rounded-circle me-4 bg-primary d-flex align-items-center justify-content-center">
                              S
                            </div>
                            <a href="#" class="text-dark  text-hover-primary d-block fs-6">Sunveen</a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </li>
                  <li class="list-inline-item  cursor-pointer  me-6" data-bs-toggle="tooltip" data-bs-placement="top"
                    title="Vote Option">
                    <div class=" menu-dropdown">
                      <!-- <i class="fas fa-thumbs-up text-dark fs-3" ></i> -->
                      <span class="svg-icon svg-icon-gray-600 svg-icon-2">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                          height="24px" viewBox="0 0 24 24" version="1.1">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect x="0" y="0" width="24" height="24" />
                            <path
                              d="M9,10 L9,19 L10.1525987,19.3841996 C11.3761964,19.7920655 12.6575468,20 13.9473319,20 L17.5405883,20 C18.9706314,20 20.2018758,18.990621 20.4823303,17.5883484 L21.231529,13.8423552 C21.5564648,12.217676 20.5028146,10.6372006 18.8781353,10.3122648 C18.6189212,10.260422 18.353992,10.2430672 18.0902299,10.2606513 L14.5,10.5 L14.8641964,6.49383981 C14.9326895,5.74041495 14.3774427,5.07411874 13.6240179,5.00562558 C13.5827848,5.00187712 13.5414031,5 13.5,5 L13.5,5 C12.5694044,5 11.7070439,5.48826024 11.2282564,6.28623939 L9,10 Z"
                              fill="#000000" />
                            <rect fill="#000000" opacity="0.3" x="2" y="9" width="5" height="11" rx="1" />
                          </g>
                        </svg>
                      </span>
                    </div>
                  </li>
                  <li class="list-inline-item cursor-pointer me-4" data-bs-toggle="tooltip" data-bs-placement="top"
                    title="Share">
                    <div>
                      <!-- <i class="fas fa-share-alt fs-3 text-dark"></i> -->
                      <span class="svg-icon svg-icon-gray-600 svg-icon-2">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                          height="24px" viewBox="0 0 24 24" version="1.1">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect x="0" y="0" width="24" height="24" />
                            <path
                              d="M10.9,2 C11.4522847,2 11.9,2.44771525 11.9,3 C11.9,3.55228475 11.4522847,4 10.9,4 L6,4 C4.8954305,4 4,4.8954305 4,6 L4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,16 C20,15.4477153 20.4477153,15 21,15 C21.5522847,15 22,15.4477153 22,16 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 L2,6 C2,3.790861 3.790861,2 6,2 L10.9,2 Z"
                              fill="#000000" fill-rule="nonzero" opacity="0.3" />
                            <path
                              d="M24.0690576,13.8973499 C24.0690576,13.1346331 24.2324969,10.1246259 21.8580869,7.73659596 C20.2600137,6.12944276 17.8683518,5.85068794 15.0081639,5.72356847 L15.0081639,1.83791555 C15.0081639,1.42370199 14.6723775,1.08791555 14.2581639,1.08791555 C14.0718537,1.08791555 13.892213,1.15726043 13.7542266,1.28244533 L7.24606818,7.18681951 C6.93929045,7.46513642 6.9162184,7.93944934 7.1945353,8.24622707 C7.20914339,8.26232899 7.22444472,8.27778811 7.24039592,8.29256062 L13.7485543,14.3198102 C14.0524605,14.6012598 14.5269852,14.5830551 14.8084348,14.2791489 C14.9368329,14.140506 15.0081639,13.9585047 15.0081639,13.7695393 L15.0081639,9.90761477 C16.8241562,9.95755456 18.1177196,10.0730665 19.2929978,10.4469645 C20.9778605,10.9829796 22.2816185,12.4994368 23.2042718,14.996336 L23.2043032,14.9963244 C23.313119,15.2908036 23.5938372,15.4863432 23.9077781,15.4863432 L24.0735976,15.4863432 C24.0735976,15.0278051 24.0690576,14.3014082 24.0690576,13.8973499 Z"
                              fill="#000000" fill-rule="nonzero"
                              transform="translate(15.536799, 8.287129) scale(-1, 1) translate(-15.536799, -8.287129) " />
                          </g>
                        </svg>
                      </span>
                    </div>
                    <!--begin::Menu 2-->
                    <div
                      class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold w-300px py-5 px-3 text-start">
                      <!--begin::Menu item-->
                      <div class="mb-6 px-3">
                        <label class="fw-bold fs-6 p-0 mb-2 w-100">Share</label>
                        <div class="position-relative w-100">
                          <button type="button" class="btn btn-light text-start rounded w-100 fs-7 px-4 py-3">
                            Add People
                            <span class="float-end">
                              <span class="svg-icon svg-icon-primary svg-icon mx-0">
                                <!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2021-05-14-112058/theme/html/demo1/dist/../src/media/svg/icons/Navigation/Angle-down.svg-->
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                  width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <polygon points="0 0 24 0 24 24 0 24"></polygon>
                                    <path
                                      d="M6.70710678,15.7071068 C6.31658249,16.0976311 5.68341751,16.0976311 5.29289322,15.7071068 C4.90236893,15.3165825 4.90236893,14.6834175 5.29289322,14.2928932 L11.2928932,8.29289322 C11.6714722,7.91431428 12.2810586,7.90106866 12.6757246,8.26284586 L18.6757246,13.7628459 C19.0828436,14.1360383 19.1103465,14.7686056 18.7371541,15.1757246 C18.3639617,15.5828436 17.7313944,15.6103465 17.3242754,15.2371541 L12.0300757,10.3841378 L6.70710678,15.7071068 Z"
                                      fill="#000000" fill-rule="nonzero"
                                      transform="translate(12.000003, 11.999999) rotate(-180.000000) translate(-12.000003, -11.999999) ">
                                    </path>
                                  </g>
                                </svg>
                                <!--end::Svg Icon-->
                              </span>
                            </span>
                          </button>
                          <!--begin::Menu 2-->
                          <div
                            class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary w-sm-300px w-250px fw-bold py-3">
                            <!--begin::Menu item-->
                            <div class="menu-item px-3">
                              <a href="#" class="menu-link px-3">
                                <div
                                  class="user-profile rounded-circle me-3 bg-warning w-30px h-30px d-flex align-items-center justify-content-center fs-7">
                                  <img src="assets/img/g.png" class="img-fluid rounded-circle" alt="user" />
                                </div>
                                Gaurav Aery
                              </a>
                            </div>
                            <div class="menu-item px-3">
                              <a href="#" class="menu-link px-3">
                                <div
                                  class="user-profile rounded-circle me-3 bg-warning w-30px h-30px d-flex align-items-center justify-content-center fs-7">
                                  A
                                </div>
                                Amit
                              </a>
                            </div>
                            <div class="menu-item px-3">
                              <a href="#" class="menu-link px-3">
                                <div
                                  class="user-profile rounded-circle me-3 bg-info text-white w-30px h-30px d-flex align-items-center justify-content-center fs-9">
                                  N
                                </div>
                                Navneel Bhanot
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="mb-6 px-3">
                        <label class="fw-bold fs-6 p-0 mb-2 w-100">Description</label>
                        <textarea class="form-control h-100px bg-light rounded border-0 resize-none"></textarea>
                      </div>
                      <div class="px-3 d-flex">
                        <button type="button" class="btn bg-transparemt btn-sm px-0">
                          Copy Link
                        </button>
                        <button type="button" class="btn btn-primary btn-sm ms-auto">
                          Send
                        </button>
                      </div>
                    </div>
                  </li>
                  <li class="list-inline-item  d-none cursor-pointer me-4" data-bs-toggle="tooltip"
                    data-bs-placement="top" title="Action">
                    <div ngbDropdown>
                      <div class="menu-dropdown">
                        <!-- <i class="bi bi-three-dots fs-3 text-dark"></i> -->

                        <span class="svg-icon svg-icon-gray-600 svg-icon-2" ngbDropdownToggle>
                          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                            width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                              <rect x="0" y="0" width="24" height="24" />
                              <circle fill="#000000" cx="5" cy="12" r="2" />
                              <circle fill="#000000" cx="12" cy="12" r="2" />
                              <circle fill="#000000" cx="19" cy="12" r="2" />
                            </g>
                          </svg>
                        </span>
                      </div>
                      <!--begin::Menu 2-->
                      <div
                        class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold w-150px py-3 "
                        ngbDropdownMenu>
                        <!--begin::Menu item-->
                        <div class="menu-item px-3">
                          <a ngbDropdownItem class="menu-link px-3">Add Flag</a>
                        </div>
                        <div class="menu-item px-3">
                          <a class="menu-link px-3" (click)="openMove(moveTask)" ngbDropdownItem>Move</a>
                        </div>
                        <div class="menu-item px-3">
                          <a class="menu-link px-3" (click)="cloneTask(task._id)" ngbDropdownItem>Clone</a>
                        </div>
                        <!--end::Menu item-->
                      </div>
                    </div>

                  </li>
                  <li class="list-inline-item cursor-pointer">
                    <div ngbDropdown container="body" class="btn-arrow-none">
                      <span ngbDropdownToggle class=" px-2  menu-dropdown">
                        <!--begin::Svg Icon | path: icons/duotune/general/gen052.svg-->
                        <span class="svg-icon svg-icon-gray-600 svg-icon-2">
                          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                            width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                              <rect x="0" y="0" width="24" height="24" />
                              <circle fill="#000000" cx="5" cy="12" r="2" />
                              <circle fill="#000000" cx="12" cy="12" r="2" />
                              <circle fill="#000000" cx="19" cy="12" r="2" />
                            </g>
                          </svg>
                        </span>
                        <!--end::Svg Icon-->
                      </span>
                      <div
                        class="menu menu-sub test-drodpwn menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-150px py-4"
                        ngbDropdownMenu style="position: absolute !important; z-index: 999999;">

                        <div class="menu-item px-3">
                          <a class="menu-link px-3" (click)="isFlag(!task?.flag)"
                            ngbDropdownItem>{{!task?.flag?'Add':'Remove'}} Flag</a>
                        </div>
                        <div class="menu-item px-3">
                          <a class="menu-link px-3" (click)="openMove(moveTask)" ngbDropdownItem>Move</a>
                        </div>
                        <div class="menu-item px-3">
                          <a class="menu-link px-3" ngbDropdownItem (click)="cloneTask(task)">Clone</a>
                        </div>
                        <!--end::Menu item-->
                      </div>
                    </div>

                  </li>
                  <li class="list-inline-item" data-bs-toggle="tooltip" data-bs-placement="top" title="Action">
                    <div class="btn btn-icon btn-sm btn-light" (click)="modal.close('Close click')">
                      <span class="svg-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                          height="24px" viewBox="0 0 24 24" version="1.1">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(12.000000, 12.000000) rotate(-45.000000) translate(-12.000000, -12.000000) translate(4.000000, 4.000000)"
                              fill="#000000">
                              <rect x="0" y="7" width="16" height="2" rx="1"></rect>
                              <rect opacity="0.3"
                                transform="translate(8.000000, 8.000000) rotate(-270.000000) translate(-8.000000, -8.000000) "
                                x="0" y="7" width="16" height="2" rx="1"></rect>
                            </g>
                          </g>
                        </svg>
                      </span>
                    </div>
                  </li>

                </ul>
              </div>

              <div>

                <div [formGroup]="listForm">

                  <ng-select class="select-red  text-uppercase" [items]="list" [bindLabel]="'listName'"
                    formControlName="listID" [bindValue]="'_id'" [searchable]="false" [multiple]="false"
                    [clearable]="false" (change)="updateData($event, 'listID')">

                  </ng-select>
                </div>

                <div class="w-100">
                  <form [formGroup]="form">
                    <div class="accordion-item w-100 bg-light mt-5 ">
                      <h6 class="accordion-header" id="kt_accordion_1_header_2">
                        <button class="accordion-button fs-5 py-3 fw-bold  active show" type="button"
                          data-bs-toggle="collapse" data-bs-target="#issue-detail" aria-expanded="false"
                          aria-controls="issue-detail">
                          Details
                        </button>
                      </h6>
                      <div id="issue-detail" class="accordion-collapse collapse show"
                        aria-labelledby="kt_accordion_1_header_2" data-bs-parent="#kt_accordion_1">
                        <div class="accordion-body bg-white">
                          <div class="w-100">
                            <div class="row align-items-center">
                              <div class="col-sm-4">
                                <label class="fw-bold fs-6 p-0 w-100 mb-sm-0 mb-1">Assignee</label>
                              </div>
                              <div class="col-sm-8">
                                <ng-select class="select-red" placeholder="Add Assignee" formControlName="assignee"
                                  [items]="users" [bindLabel]="'fullName'" [bindValue]="'_id'" [searchable]="true"
                                  [multiple]="false" [clearable]="false" (change)="updateData($event,'assigneeID')">
                                </ng-select>

                              </div>
                            </div>
                            <div class="w-100 my-1 d-inline-block"></div>
                            <div class="row align-items-center">
                              <div class="col-sm-4">
                                <label class="fw-bold fs-6 p-0 w-100 mb-sm-0 mb-1">Labels</label>
                              </div>
                              <div class="col-sm-8">
                                <ng-select [items]="Labels" [addTag]="addTagFn" [hideSelected]="true"
                                  [openOnEnter]="true" [multiple]="true" [clearable]="false"
                                  (change)="changeLabel($event)" formControlName="labels">
                                </ng-select>


                              </div>
                            </div>
                            <div class="w-100 my-1 d-inline-block"></div>
                            <div class="row align-items-center">
                              <div class="col-sm-4">
                                <label class="fw-bold fs-6 p-0 w-100 mb-sm-0 mb-1">Sprint</label>
                              </div>
                              <div class="col-sm-8">
                                <ng-select class="select-red" placeholder="sprint" formControlName="sprintId"
                                  [items]="sprints" [bindLabel]="'sprintName'" [bindValue]="'_id'" [searchable]="true"
                                  [multiple]="false" [clearable]="false" (change)="updateData($event, 'sprint')">
                                </ng-select>
                              </div>
                            </div>
                            <div class="w-100 my-1 d-inline-block"></div>
                            <div class="row align-items-center">
                              <div class="col-sm-4">
                                <label class="fw-bold fs-6 p-0 w-100 mb-sm-0 mb-1">Story Point Estimate</label>
                              </div>
                              <div class="col-sm-8">
                                <input type="number" class="w-100 form-control fs-7 form-control-solid form-control-lg"
                                  [value]="task?.storyPointEstimate" (change)="
                                    updateData($event, 'storyPointEstimate')
                                  " />
                              </div>
                            </div>
                            <div class="w-100 my-1 d-inline-block"></div>
                            <div class="row align-items-center">
                              <div class="col-sm-4">
                                <label class="fw-bold fs-6 p-0 w-100 mb-sm-0 mb-1">
                                  Reporter</label>
                              </div>
                              <div *ngIf="!task?.reporter?.avatar" class="col-sm-8">
                                <div class="d-flex">
                                  <div [ngStyle]="{
                                      'background-color': stringToHslColor(
                                        task?.reporter?.fullName
                                      )
                                    }"
                                    class="user-profile rounded-circle text-uppercase text-white w-20px h-20px d-flex align-items-center justify-content-center fs-9 me-2">
                                    {{
                                    task?.reporter?.fullName | namePipe:task?.reporter?.fullName}}

                                  </div>
                                  {{ task?.reporter?.fullName | titlecase }}
                                </div>
                              </div>
                              <div *ngIf="task?.reporter?.avatar" class="col-sm-8">
                                <div class="d-flex">
                                  <div
                                    class="user-profile rounded-circle text-uppercase text-white w-20px h-20px d-flex align-items-center justify-content-center fs-9 me-2">
                                    <img [src]="baseUrl + task?.reporter?.avatar" alt="img"
                                      class="user-profile rounded-circle text-uppercase ms-2  w-20px h-20px d-flex align-items-center justify-content-center fs-9" />
                                  </div>
                                  {{ task?.reporter?.fullName | titlecase }}
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </form>
                  <div class="mt-6">
                    <p class="fs-8 text-muted mb-1">
                      Created {{ task?.createdAt | date: "longDate" }}
                      {{ task?.createdAt | date: "shortTime" }}
                    </p>
                    <p class="fs-8 mb-0 text-muted">
                      Updated {{ task?.updatedAt }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #moveTask id="jyoti">
  <div class="modal-header py-3">
    <h5 class="modal-title mb-0" id="modal-basic-title">Move Task</h5>
    <div class="btn btn-icon btn-sm btn-active-light-primary ms-2">
      <span class="svg-icon svg-icon-primary" (click)="dismiss()">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
          viewBox="0 0 24 24" version="1.1">
          <g _ngcontent-nww-c225="" _ngcontent-wwh-c101="" stroke="none" stroke-width="1" fill="none"
            fill-rule="evenodd">
            <g _ngcontent-nww-c225="" _ngcontent-wwh-c101=""
              transform="translate(12.000000, 12.000000) rotate(-45.000000) translate(-12.000000, -12.000000) translate(4.000000, 4.000000)"
              fill="#000000">
              <rect _ngcontent-nww-c225="" _ngcontent-wwh-c101="" x="0" y="7" width="16" height="2" rx="1"></rect>
              <rect _ngcontent-nww-c225="" _ngcontent-wwh-c101="" opacity="0.3"
                transform="translate(8.000000, 8.000000) rotate(-270.000000) translate(-8.000000, -8.000000) " x="0"
                y="7" width="16" height="2" rx="1"></rect>
            </g>
          </g>
        </svg></span>
    </div>
  </div>
  <div class="modal-body">
    <h6 class="fw-normal text-primary">{{task?.projectID?.key | uppercase}}-{{task?.SN}}</h6>
    <label class="w-100 w-100 mb-2">To</label>
    <div class="input-group mb-3">
      <div class="w-100">
        <ng-select class="select-red" placeholder="Project" [items]="projectList" [(ngModel)]="selectedMoveProjectID"
          [bindLabel]="'projectName'" [bindValue]="'_id'" [searchable]="true" [multiple]="false" [clearable]="false">
        </ng-select>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light btn-sm" (click)="dismiss(moveTask)">Cancel</button>
    <button type="button" class="btn btn-primary btn-sm" (click)="moveTaskToAnotherProject()">Move</button>
  </div>
</ng-template>
<notifier-container></notifier-container>